<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Essencial - DDL, DML, DQL (Oracle)</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
        /* Adicionando padding aos blocos de c√≥digo para melhor visualiza√ß√£o */
        pre[class*="language-"] {
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0.3em;
        }

        /* Highlight active sidebar link */
        .sidebar a.active {
            background-color: #0056b3;
            /* Or any color that indicates active state */
            color: white;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div class="overlay" id="overlay"></div>

    <button class="hamburger-menu" id="hamburger-menu">
        <i class="fas fa-bars"></i>
    </button>

    <div class="sidebar" id="sidebar">
        <h2>PL/SQL üöÄ</h2>
        <a href="index.html"><i class="fas fa-home"></i> <span>In√≠cio</span></a>
        <a href="Conceitos BD.html"><i class="fas fa-book"></i> <span>Conceitos
                BD</span></a>
        <a href="SQL Essencial.html"><i class="fas fa-code"></i> <span>SQL Essencial</span></a>
        <a href="SQL - Fundamentos Avan√ßados.html"><i class="fas fa-database"></i> <span>SQL Fundamentos
                Avan√ßados</span></a>
        <a href="SQL - Agregacao e Subconsultas.html"><i class="fas fa-calculator"></i> <span>Agrega√ß√£o e
                Subconsultas</span></a>
        <a href="SQL - DDL Avancado e objetos.html"><i class="fas fa-cogs"></i> <span>SQL DDL Avan√ßado</span></a>
        <a href="Pr√°tica e Otimiza√ß√£o.html"><i class="fas fa-chart-line"></i> <span>Pr√°tica e Otimiza√ß√£o</span></a>
        <a href="PLSQL - Fundamentos e Estruturas de Controle.html"><i class="fas fa-file-code"></i> <span>PL/SQL
                Fundamentos</span></a>
        <a href="SQL Programacao.html"><i class="fas fa-cogs"></i><span>PL/SQL Programa√ß√£o</span></a>
        <a href="PLSQL - Tratamento de Excecoes e Pacotes.html"><i class="fas fa-boxes"></i> <span>PL/SQL Exce√ß√µes e
                Pacotes</span></a>
        <a href="Extras - PL_SQL Avan√ßado.html"><i class="fas fa-plus-circle"></i> <span>PL/SQL Avan√ßado</span></a>
    </div>

    <div class="content" id="content">
        <header>
            <h1>SQL Essencial: DDL, DML, DQL com Oracle</h1>
            <p>Aprenda os comandos fundamentais do SQL para definir, manipular e consultar dados em um ambiente Oracle.
                Domine a cria√ß√£o de tabelas, inser√ß√£o, atualiza√ß√£o, exclus√£o e sele√ß√£o de informa√ß√µes.</p>
        </header>

        <div class="main-section">

            <div class="sub-section">
                <h2>1Ô∏è‚É£ Linguagem de Defini√ß√£o de Dados (DDL) <i class="fas fa-cogs"></i></h2>
                <p>DDL (Data Definition Language) √© usada para definir e modificar a estrutura de objetos do banco de
                    dados, como tabelas, √≠ndices e views. Essas opera√ß√µes s√£o normalmente irrevers√≠veis por `ROLLBACK` e
                    causam um `COMMIT` impl√≠cito.</p>

                <h3>1.1. Tipos de Dados Essenciais no Oracle <i class="fas fa-info-circle"></i></h3>
                <p>A escolha correta do tipo de dado √© crucial para a performance, armazenamento e integridade dos dados
                    em seu banco de dados Oracle. Abaixo, alguns dos tipos de dados mais comuns:</p>
                <div class="card">
                    <ul>
                        <li><strong>`NUMBER(p, s)`:</strong> Para n√∫meros, onde `p` √© a precis√£o total (n√∫mero total de
                            d√≠gitos) e `s` √© a escala (n√∫mero de d√≠gitos √† direita da v√≠rgula decimal).
                            <ul>
                                <li>Ex: `NUMBER(5)` (inteiro de at√© 5 d√≠gitos), `NUMBER(10,2)` (at√© 10 d√≠gitos, 2
                                    decimais).</li>
                                <li>Ideal para IDs, quantidades, pre√ßos.</li>
                            </ul>
                        </li>
                        <li><strong>`VARCHAR2(size)`:</strong> Para strings de caracteres de comprimento vari√°vel.
                            `size` define o tamanho m√°ximo em bytes ou caracteres.
                            <ul>
                                <li>Ex: `VARCHAR2(100)` (texto de at√© 100 caracteres).</li>
                                <li>Prefer√≠vel ao `VARCHAR` no Oracle, pois o `VARCHAR` pode ter comportamentos
                                    inesperados.</li>
                            </ul>
                        </li>
                        <li><strong>`CHAR(size)`:</strong> Para strings de caracteres de comprimento fixo. Se a string
                            for menor que `size`, ser√° preenchida com espa√ßos em branco.
                            <ul>
                                <li>Ex: `CHAR(10)` (sempre ocupa 10 caracteres, mesmo que o valor seja menor).</li>
                                <li>Usado para dados com comprimento fixo garantido, como c√≥digos de status de 2 letras.
                                </li>
                            </ul>
                        </li>
                        <li><strong>`DATE`:</strong> Armazena valores de data e hora (s√©culo, ano, m√™s, dia, hora,
                            minuto e segundo).
                            <ul>
                                <li>Ideal para datas de nascimento, datas de cadastro, etc.</li>
                            </ul>
                        </li>
                        <li><strong>`TIMESTAMP`:</strong> Extens√£o do `DATE` que armazena fra√ß√µes de segundo.
                            <ul>
                                <li>Ex: `TIMESTAMP(6)` (at√© 6 casas decimais para segundos).</li>
                                <li>√ötil quando a precis√£o de tempo √© cr√≠tica (logs de eventos, transa√ß√µes r√°pidas).
                                </li>
                            </ul>
                        </li>
                        <li><strong>`CLOB`:</strong> Para armazenar grandes blocos de dados de caracteres (texto longo,
                            at√© 4 GB).
                            <ul>
                                <li>Ex: `CLOB` (para descri√ß√µes longas, artigos, conte√∫do de livros).</li>
                                <li>Melhor para dados de texto grandes que n√£o cabem em `VARCHAR2`.</li>
                            </ul>
                        </li>
                        <li><strong>`BLOB`:</strong> Para armazenar grandes blocos de dados bin√°rios (imagens, v√≠deos,
                            documentos, at√© 4 GB).
                            <ul>
                                <li>Ex: `BLOB` (para arquivos multim√≠dia, PDFs).</li>
                                <li>Ideal para dados que n√£o s√£o interpretados como texto.</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <h3>1.2. Constraints (Restri√ß√µes): Garantindo a Integridade dos Dados <i class="fas fa-lock"></i></h3>
                <p>Constraints s√£o regras aplicadas √†s colunas de uma tabela para limitar o tipo de dado que pode ser
                    inserido. Elas garantem a precis√£o, confiabilidade e integridade dos dados no banco de dados.</p>

                <h4>Tipos de Constraints e Exemplos:</h4>

                <div class="card">
                    <h5>a) `PRIMARY KEY` (Chave Prim√°ria) <i class="fas fa-key"></i></h5>
                    <p>Identifica unicamente cada registro em uma tabela. Garante que a coluna (ou conjunto de colunas)
                        n√£o contenha valores duplicados e n√£o possa ter valores nulos (`NOT NULL` impl√≠cito).</p>
                    <pre><code class="language-sql">
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado',
    SEXO VARCHAR2(1),
    EMAIL VARCHAR2(255),
    DATA_MATRIICULA DATE NOT NULL,
    STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado'))
);

-- Inser√ß√£o v√°lida
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Jo√£o Silva', TO_DATE('2005/05/15', 'YYYY/MM/DD'), 'M', 'joao.silva@email.com', TO_DATE('2020-02-10', 'YYYY-MM-DD'), 'Ativo');

-- Tentativa de inserir ID duplicado (Erro: ORA-00001: unique constraint violated)
-- INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA, STATUS_MATRICULA) VALUES (1, 'Maria', TO_DATE('2004-07-21', 'YYYY-MM-DD'), TO_DATE('2019-03-01', 'YYYY-MM-DD'), 'Ativo');

-- Tentativa de inserir ID nulo (Erro: ORA-01400: cannot insert NULL into ("SYS"."ALUNOS"."ID")) se n√£o for GENERATED ALWAYS
-- INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA, STATUS_MATRICULA) VALUES (NULL, 'Pedro', TO_DATE('2003-01-01', 'YYYY-MM-DD'), TO_DATE('2018-01-01', 'YYYY-MM-DD'), 'Ativo');
                    </code></pre>
                </div>

                <div class="card">
                    <h5>b) `FOREIGN KEY` (Chave Estrangeira) <i class="fas fa-link"></i></h5>
                    <p>Cria um v√≠nculo entre duas tabelas, garantindo que os valores em uma coluna de uma tabela
                        (`FOREIGN KEY`) correspondam a valores existentes na `PRIMARY KEY` de outra tabela. Essencial
                        para manter a integridade referencial em relacionamentos.</p>
                    <pre><code class="language-sql">
-- Tabela 'PROFESSORES'
CREATE TABLE PROFESSORES (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(150) NOT NULL,
    ESPECIALIDADE VARCHAR2(100) NOT NULL,
    DT_ADIMISSAO DATE NOT NULL,
    TELEFONE VARCHAR2(20),
    EMAIL VARCHAR2(150),
    SALARIO NUMBER(10,2) NOT NULL
);

-- Tabela 'TURMAS' que referencia 'PROFESSORES'
CREATE TABLE TURMAS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    ANO_LETIVO NUMBER(4) NOT NULL,
    SERIE VARCHAR2(20) NOT NULL,
    TURNO VARCHAR2(1) CHECK (TURNO IN('M','T','N')),
    PROFESSOR_ID NUMBER,
    NUMERO_ALUNOS NUMBER(3) CHECK (NUMERO_ALUNOS >= 2),
    CONSTRAINT FK_PROFESSOR FOREIGN KEY (PROFESSOR_ID) REFERENCES PROFESSORES (ID)
    ON DELETE SET NULL -- Op√ß√£o: Se o professor for deletado, o professor_id nas turmas vira NULL
);

-- Inser√ß√£o v√°lida em Professores
INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, TELEFONE, EMAIL, SALARIO)
VALUES ('Carlos Souza', 'Matem√°tica', TO_DATE('2015-02-25', 'YYYY-MM-DD'), '99999-1234', 'carlos.souza@email.com', 3500.00);

-- Inser√ß√£o v√°lida (professor_id 1 existe na tabela Professores)
INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, PROFESSOR_ID, NUMERO_ALUNOS)
VALUES (2025, '8¬∫ Ano', 'M', 1, 25);

-- Tentativa de inserir professor_id que n√£o existe (Erro: ORA-02291: integrity constraint violated - parent key not found)
-- INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, PROFESSOR_ID, NUMERO_ALUNOS) VALUES (2025, '9¬∫ Ano', 'T', 999, 30);
                    </code></pre>
                    <p><span class="highlight-info"><strong>A√ß√µes para Chaves Estrangeiras:</strong></span>
                    <ul>
                        <li>`ON DELETE CASCADE`: Quando um registro na tabela pai √© exclu√≠do, todos os registros
                            correspondentes na tabela filha tamb√©m s√£o exclu√≠dos. **Use com extrema cautela!**</li>
                        <li>`ON DELETE SET NULL`: Quando um registro na tabela pai √© exclu√≠do, os valores da chave
                            estrangeira nos registros correspondentes na tabela filha s√£o definidos como `NULL`. (A
                            coluna FK n√£o pode ter `NOT NULL`).</li>
                        <li>(Padr√£o) `ON DELETE RESTRICT` (ou sem cl√°usula): Impede a exclus√£o de um registro na tabela
                            pai se houver registros correspondentes na tabela filha.</li>
                    </ul>
                    </p>
                </div>

                <div class="card">
                    <h5>c) `UNIQUE` (√önico) <i class="fas fa-tags"></i></h5>
                    <p>Garante que todos os valores em uma coluna (ou conjunto de colunas) sejam √∫nicos. Diferente da
                        `PRIMARY KEY`, uma coluna `UNIQUE` pode conter valores nulos, mas apenas uma vez (no Oracle). √â
                        ideal para e-mails, CPFs, RGs.</p>
                    <pre><code class="language-sql">
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado',
    SEXO VARCHAR2(1),
    EMAIL VARCHAR2(255) UNIQUE, -- 'EMAIL' deve ser √∫nico
    DATA_MATRIICULA DATE NOT NULL,
    STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado'))
);

-- Inser√ß√£o v√°lida
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Jo√£o Silva', TO_DATE('2005/05/15', 'YYYY/MM/DD'), 'M', 'joao.silva@email.com', TO_DATE('2020-02-10', 'YYYY-MM-DD'), 'Ativo');

-- Tentativa de inserir email duplicado (Erro: ORA-00001: unique constraint violated)
-- INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA) VALUES ('Pedro Souza', TO_DATE('2006-03-20', 'YYYY-MM-DD'), 'joao.silva@email.com', TO_DATE('2021-02-15', 'YYYY-MM-DD'), 'Ativo');

-- Inser√ß√£o de NULL (v√°lido, pois UNIQUE permite um valor NULL no Oracle, mas apenas um)
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, TELEFONE, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Ana Paula', TO_DATE('2007-09-01', 'YYYY-MM-DD'), NULL, 'F', NULL, TO_DATE('2022-08-01', 'YYYY-MM-DD'), 'Ativo');

-- Tentativa de inserir outro NULL (Erro: ORA-00001: unique constraint violated, no Oracle NULL √© tratado como √∫nico)
-- INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA) VALUES ('Carlos', TO_DATE('2008-01-01', 'YYYY-MM-DD'), NULL, TO_DATE('2023-01-01', 'YYYY-MM-DD'), 'Ativo');
                    </code></pre>
                </div>

                <div class="card">
                    <h5>d) `NOT NULL` (N√£o Nulo) <i class="fas fa-exclamation-circle"></i></h5>
                    <p>Garante que uma coluna n√£o possa conter valores nulos. Ou seja, um valor deve ser fornecido para
                        esta coluna ao inserir ou atualizar um registro.</p>
                    <pre><code class="language-sql">
CREATE TABLE PROFESSORES (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(150) NOT NULL, -- 'NOME' n√£o pode ser nulo
    ESPECIALIDADE VARCHAR2(100) NOT NULL, -- 'ESPECIALIDADE' n√£o pode ser nulo
    DT_ADIMISSAO DATE NOT NULL, -- 'DT_ADIMISSAO' n√£o pode ser nulo
    TELEFONE VARCHAR2(20),
    EMAIL VARCHAR2(150),
    SALARIO NUMBER(10,2) NOT NULL -- 'SALARIO' n√£o pode ser nulo
);

-- Inser√ß√£o v√°lida
INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO)
VALUES ('Ana Costa', 'Portugu√™s', TO_DATE('2017-06-10', 'YYYY-MM-DD'), 3000.00);

-- Tentativa de inserir NOME nulo (Erro: ORA-01400: cannot insert NULL into ("SYS"."PROFESSORES"."NOME"))
-- INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO) VALUES (NULL, 'F√≠sica', SYSDATE, 3200.00);
                    </code></pre>
                </div>

                <div class="card">
                    <h5>e) `CHECK` (Verifica√ß√£o) <i class="fas fa-check-square"></i></h5>
                    <p>Define uma condi√ß√£o que deve ser verdadeira para que os dados sejam inseridos ou atualizados na
                        coluna. Permite validar valores com base em uma express√£o l√≥gica.</p>
                    <pre><code class="language-sql">
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado',
    SEXO VARCHAR2(1),
    EMAIL VARCHAR2(255),
    DATA_MATRIICULA DATE NOT NULL,
    STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado')) -- 'STATUS_MATRICULA' deve ser um dos valores especificados
);

CREATE TABLE TURMAS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    ANO_LETIVO NUMBER(4) NOT NULL,
    SERIE VARCHAR2(20) NOT NULL,
    TURNO VARCHAR2(1) CHECK (TURNO IN('M','T','N')), -- 'TURNO' deve ser 'M', 'T' ou 'N'
    PROFESSOR_ID NUMBER,
    NUMERO_ALUNOS NUMBER(3) CHECK (NUMERO_ALUNOS >= 2), -- 'NUMERO_ALUNOS' deve ser >= 2
    CONSTRAINT FK_PROFESSOR FOREIGN KEY (PROFESSOR_ID) REFERENCES PROFESSORES (ID)
);

-- Inser√ß√£o v√°lida em Alunos
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Jo√£o Silva', TO_DATE('2005-05-15', 'YYYY-MM-DD'), TO_DATE('2020-02-10', 'YYYY-MM-DD'), 'Ativo');

-- Tentativa de inserir STATUS_MATRICULA inv√°lido (Erro: ORA-02290: check constraint violated)
-- INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA, STATUS_MATRICULA) VALUES ('Roberta', TO_DATE('2006-01-01', 'YYYY-MM-DD'), SYSDATE, 'Inativo');

-- Inser√ß√£o v√°lida em Turmas
INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, NUMERO_ALUNOS) VALUES (2025, '7¬∫ Ano', 'M', 30);

-- Tentativa de inserir TURNO inv√°lido (Erro: ORA-02290: check constraint violated)
-- INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, NUMERO_ALUNOS) VALUES (2025, '6¬∫ Ano', 'X', 28);

-- Tentativa de inserir NUMERO_ALUNOS inv√°lido (Erro: ORA-02290: check constraint violated)
-- INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, NUMERO_ALUNOS) VALUES (2025, '5¬∫ Ano', 'T', 1);
                    </code></pre>
                </div>

                <div class="card">
                    <h5>f) `DEFAULT` (Valor Padr√£o) <i class="fas fa-undo-alt"></i></h5>
                    <p>Atribui um valor padr√£o a uma coluna se nenhum valor for explicitamente fornecido durante uma
                        opera√ß√£o `INSERT`. N√£o √© tecnicamente uma "constraint" no mesmo sentido que as outras, mas √© uma
                        propriedade importante da coluna para garantir a completude dos dados.</p>
                    <pre><code class="language-sql">
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado', -- 'TELEFONE' assume 'N√£o informado' se n√£o especificado
    SEXO VARCHAR2(1),
    EMAIL VARCHAR2(255),
    DATA_MATRIICULA DATE NOT NULL,
    STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado'))
);

-- Inser√ß√£o sem especificar TELEFONE (usar√° o valor padr√£o)
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Ana Clara', TO_DATE('2007-03-05', 'YYYY-MM-DD'), 'F', 'ana.clara@email.com', SYSDATE, 'Ativo');

-- Inser√ß√£o especificando TELEFONE
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, TELEFONE, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Lucas Rocha', TO_DATE('2006-11-20', 'YYYY-MM-DD'), '81 98765-4321', 'M', 'lucas.r@email.com', SYSDATE, 'Ativo');

SELECT TELEFONE FROM ALUNOS WHERE NOME IN ('Ana Clara', 'Lucas Rocha');
                    </code></pre>
                </div>

                <h3>1.3. CREATE TABLE: Criando a Estrutura da Tabela <i class="fas fa-table"></i></h3>
                <p>O comando `CREATE TABLE` √© usado para criar uma nova tabela no banco de dados. Voc√™ define o nome da
                    tabela, as colunas, seus tipos de dados e as restri√ß√µes (constraints).</p>

                <div class="card">
                    <h4>Cen√°rio: Criando as Tabelas do Sistema Escolar</h4>
                    <p>Vamos criar as tabelas para armazenar informa√ß√µes de alunos, professores, turmas e notas. Preste
                        aten√ß√£o aos tipos de dados e √†s restri√ß√µes para garantir a integridade dos dados.</p>

                    <pre><code class="language-sql">
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado',
    SEXO VARCHAR2(1),
    EMAIL VARCHAR2(255) UNIQUE,
    DATA_MATRIICULA DATE NOT NULL,
    STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado'))
);

CREATE TABLE PROFESSORES (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(150) NOT NULL,
    ESPECIALIDADE VARCHAR2(100) NOT NULL,
    DT_ADIMISSAO DATE NOT NULL,
    TELEFONE VARCHAR2(20),
    EMAIL VARCHAR2(150),
    SALARIO NUMBER(10,2) NOT NULL
);

CREATE TABLE TURMAS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    ANO_LETIVO NUMBER(4) NOT NULL,
    SERIE VARCHAR2(20) NOT NULL,
    TURNO VARCHAR2(1) CHECK (TURNO IN('M','T','N')),
    PROFESSOR_ID NUMBER,
    NUMERO_ALUNOS NUMBER(3) CHECK (NUMERO_ALUNOS >= 2),
    CONSTRAINT FK_PROFESSOR FOREIGN KEY (PROFESSOR_ID) REFERENCES PROFESSORES (ID)
);

CREATE TABLE NOTAS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    ALUNO_ID NUMBER,
    TURMA_ID NUMBER,
    MATERIA VARCHAR2(100) NOT NULL,
    NOTA_1 NUMBER(5,2),
    NOTA_2 NUMBER(5,2),
    NOTA_3 NUMBER(5,2),
    NOTA_4 NUMBER(5,2),
    MEDIA_FINAL NUMBER(5,2),
    CONSTRAINT fk_aluno FOREIGN KEY (aluno_id) REFERENCES Alunos(id),
    CONSTRAINT fk_turma FOREIGN KEY (turma_id) REFERENCES Turmas(id)
);
                    </code></pre>
                    <h4>Explica√ß√£o das Colunas e Restri√ß√µes (Revis√£o):</h4>
                    <ul>
                        <li><code>ALUNOS.ID NUMBER PRIMARY KEY</code>: Identificador √∫nico, auto-gerado, n√£o nulo.</li>
                        <li><code>ALUNOS.NOME VARCHAR2(255) NOT NULL</code>: Nome do aluno, obrigat√≥rio.</li>
                        <li><code>ALUNOS.DATA_NASCIMENTO DATE NOT NULL</code>: Data de nascimento, obrigat√≥rio.</li>
                        <li><code>ALUNOS.TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado'</code>: Telefone do aluno, com
                            valor padr√£o.</li>
                        <li><code>ALUNOS.SEXO VARCHAR2(1)</code>: Sexo do aluno.</li>
                        <li><code>ALUNOS.EMAIL VARCHAR2(255) UNIQUE</code>: E-mail √∫nico para cada aluno.</li>
                        <li><code>ALUNOS.DATA_MATRIICULA DATE NOT NULL</code>: Data de matr√≠cula, obrigat√≥rio.</li>
                        <li><code>ALUNOS.STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado'))</code>:
                            Status da matr√≠cula, validado por CHECK.</li>
                        <li><code>PROFESSORES.ID NUMBER PRIMARY KEY</code>: Identificador √∫nico do professor,
                            auto-gerado.</li>
                        <li><code>PROFESSORES.NOME VARCHAR2(150) NOT NULL</code>: Nome do professor, obrigat√≥rio.</li>
                        <li><code>PROFESSORES.ESPECIALIDADE VARCHAR2(100) NOT NULL</code>: Especialidade do professor,
                            obrigat√≥rio.</li>
                        <li><code>PROFESSORES.DT_ADIMISSAO DATE NOT NULL</code>: Data de admiss√£o, obrigat√≥rio.</li>
                        <li><code>TURMAS.PROFESSOR_ID NUMBER FOREIGN KEY REFERENCES PROFESSORES (ID)</code>: Chave
                            estrangeira que referencia o ID do professor.</li>
                        <li><code>TURMAS.TURNO VARCHAR2(1) CHECK (TURNO IN('M','T','N'))</code>: Turno da turma,
                            validado por CHECK.</li>
                        <li><code>TURMAS.NUMERO_ALUNOS NUMBER(3) CHECK (NUMERO_ALUNOS >= 2)</code>: N√∫mero de alunos na
                            turma, com CHECK para ser maior ou igual a 2.</li>
                        <li><code>NOTAS.ALUNO_ID NUMBER FOREIGN KEY REFERENCES ALUNOS (ID)</code>: Chave estrangeira que
                            referencia o ID do aluno.</li>
                        <li><code>NOTAS.TURMA_ID NUMBER FOREIGN KEY REFERENCES TURMAS (ID)</code>: Chave estrangeira que
                            referencia o ID da turma.</li>
                        <li><code>NOTAS.NOTA_1, NOTA_2, NOTA_3, NOTA_4 NUMBER(5,2)</code>: Notas individuais, com
                            precis√£o de 5 d√≠gitos no total e 2 decimais.</li>
                        <li><code>NOTAS.MEDIA_FINAL NUMBER(5,2)</code>: M√©dia final, com precis√£o de 5 d√≠gitos no total
                            e 2 decimais.</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>1.3.1. Criando Tabela a Partir de uma Consulta (`CREATE TABLE AS SELECT`) <i
                            class="fas fa-copy"></i></h4>
                    <p>Este comando √© √∫til para criar uma nova tabela e popular seus dados a partir do resultado de uma
                        consulta `SELECT` em uma ou mais tabelas existentes. √â excelente para criar tabelas de c√≥pia ou
                        tabelas tempor√°rias.</p>
                    <pre><code class="language-sql">
-- Criar uma tabela 'ALUNOS_ATIVOS' com dados de alunos com status 'Ativo'
CREATE TABLE ALUNOS_ATIVOS AS
SELECT ID, NOME, EMAIL
FROM ALUNOS
WHERE STATUS_MATRICULA = 'Ativo';

-- Observe que as constraints (PK, UNIQUE, NOT NULL, CHECK) da tabela original geralmente
-- N√ÉO s√£o copiadas automaticamente. Voc√™ precisaria adicion√°-las separadamente.
                    </code></pre>
                </div>

                <h3>1.4. Gerando IDs de Forma Autom√°tica (Auto Increment) <i class="fas fa-fingerprint"></i></h3>
                <p>No Oracle, voc√™ pode gerar IDs automaticamente de algumas maneiras. As mais modernas e recomendadas
                    s√£o as colunas `IDENTITY` e o uso de `SEQUENCE`s, especialmente para cen√°rios mais robustos.</p>

                <h4>1.4.1. Colunas IDENTITY (Oracle 12c e superior)</h4>
                <p>As colunas `IDENTITY` simplificam a cria√ß√£o de colunas com auto-incremento, similar ao
                    `AUTO_INCREMENT` em MySQL ou `IDENTITY` em SQL Server. Existem duas formas principais:</p>

                <div class="card">
                    <h5>a) `GENERATED ALWAYS AS IDENTITY` (Forma R√≠gida)</h5>
                    <p>Esta op√ß√£o significa que o Oracle **sempre** ir√° gerar o valor para esta coluna. Voc√™ **n√£o
                        pode** inserir um valor manualmente para ela durante um `INSERT`.</p>
                    <ul>
                        <li><strong>Quando usar:</strong> Ideal quando voc√™ quer garantir que o banco de dados seja o
                            √∫nico respons√°vel pela gera√ß√£o do ID, evitando qualquer sobreposi√ß√£o manual. Garante a
                            integridade e unicidade de forma estrita.</li>
                        <li><strong>Por que usar:</strong> Previne erros onde um ID duplicado ou incorreto possa ser
                            inserido manualmente, mantendo a sequ√™ncia de ID intacta e sob controle do SGBD.</li>
                    </ul>
                    <pre><code class="language-sql">
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY, -- ID sempre gerado pelo banco
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    DATA_MATRIICULA DATE NOT NULL
);

-- Inser√ß√£o V√ÅLIDA (o banco gera o ID)
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES ('Maria Silva', TO_DATE('2005-05-15', 'YYYY-MM-DD'), TO_DATE('2020-02-10', 'YYYY-MM-DD'));

-- Inser√ß√£o INV√ÅLIDA (tentando inserir ID manualmente, resultar√° em erro ORA-32795)
-- INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES (101, 'Pedro Santos', TO_DATE('2006-03-20', 'YYYY-MM-DD'), TO_DATE('2021-02-15', 'YYYY-MM-DD'));
                    </code></pre>

                    <h5>b) `GENERATED BY DEFAULT ON NULL AS IDENTITY` (Forma Flex√≠vel)</h5>
                    <p>Esta op√ß√£o permite que o Oracle gere o valor para a coluna **se** voc√™ n√£o fornecer um valor no
                        `INSERT` ou se voc√™ fornecer `NULL`. Voc√™ **pode** inserir um valor manualmente se desejar.</p>
                    <ul>
                        <li><strong>Quando usar:</strong> √ötil em cen√°rios onde voc√™ pode ter IDs pr√©-existentes (por
                            exemplo, ao migrar dados de um sistema antigo) ou quando, em situa√ß√µes excepcionais, a
                            inser√ß√£o manual de um ID √© necess√°ria (ex: para dados de teste espec√≠ficos ou integra√ß√µes).
                        </li>
                        <li><strong>Por que usar:</strong> Oferece flexibilidade. O banco ainda automatiza a gera√ß√£o de
                            IDs na maioria dos casos, mas permite a interven√ß√£o manual quando justificado.</li>
                    </ul>
                    <pre><code class="language-sql">
-- Para usar este exemplo, assuma que a tabela ALUNOS n√£o foi criada com GENERATED ALWAYS
-- DROP TABLE ALUNOS; -- Se precisar recriar
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, -- ID gerado se n√£o for fornecido ou for NULL
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    DATA_MATRIICULA DATE NOT NULL
);

-- Inser√ß√£o V√ÅLIDA (o banco gera o ID)
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES ('Ana Paula', TO_DATE('2007-09-01', 'YYYY-MM-DD'), SYSDATE);

-- Inser√ß√£o V√ÅLIDA (o banco gera o ID, pois explicitamente NULL foi passado)
INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES (NULL, 'Carlos Eduardo', TO_DATE('2008-01-01', 'YYYY-MM-DD'), SYSDATE);

-- Inser√ß√£o V√ÅLIDA (ID inserido manualmente)
INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES (200, 'Fernanda Souza', TO_DATE('2006-05-10', 'YYYY-MM-DD'), SYSDATE);
                    </code></pre>

                    <p><span class="highlight-info"><strong>Configura√ß√µes Avan√ßadas de IDENTITY:</strong></span> Voc√™
                        pode customizar o in√≠cio e o incremento das colunas `IDENTITY`:</p>
                    <pre><code class="language-sql">
CREATE TABLE PROFESSORES (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY
        (START WITH 1000 INCREMENT BY 10) PRIMARY KEY, -- Come√ßa em 1000, incrementa de 10 em 10
    NOME VARCHAR2(150) NOT NULL,
    ESPECIALIDADE VARCHAR2(100) NOT NULL,
    DT_ADIMISSAO DATE NOT NULL,
    SALARIO NUMBER(10,2) NOT NULL
);

INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO) VALUES ('Monitor UltraWide', 'Matem√°tica', SYSDATE, 3000.00); -- ID ser√° 1000
INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO) VALUES ('Teclado Mec√¢nico', 'F√≠sica', SYSDATE, 3200.00);  -- ID ser√° 1010
INSERT INTO PROFESSORES (ID, NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO) VALUES (500, 'Mouse Ergon√¥mico', 'Qu√≠mica', SYSDATE, 3100.00); -- ID 500
                    </code></pre>
                </div>

                <h4>1.4.2. Sequences (Sequ√™ncias) + Triggers (Forma Tradicional e Robusta)</h4>
                <p>Antes do Oracle 12c, a forma padr√£o de auto-incremento era usar `SEQUENCE`s em conjunto com
                    `TRIGGER`s (gatilhos). Esta abordagem ainda √© amplamente utilizada em sistemas legados ou em
                    cen√°rios mais complexos que exigem maior controle sobre a gera√ß√£o de n√∫meros. Para bancos de dados
                    robustos e de grande porte, a utiliza√ß√£o de `SEQUENCE`s √© a pr√°tica mais comum e flex√≠vel.</p>
                <ul>
                    <li><strong>Quando usar:</strong> Para compatibilidade com vers√µes mais antigas do Oracle, em
                        ambientes que precisam de controle granular sobre a sequ√™ncia (cache, order, etc.), ou quando
                        uma √∫nica sequ√™ncia precisa servir a m√∫ltiplas tabelas (embora menos comum). √â a forma preferida
                        para bancos corporativos que demandam alta performance e controle.</li>
                    <li><strong>Por que usar:</strong> Oferece mais control e flexibilidade sobre a gera√ß√£o de n√∫meros
                        (ciclos, cache, etc.). √â perform√°tico e escal√°vel para cen√°rios de alta concorr√™ncia.</li>
                </ul>

                <div class="card">
                    <h5>Exemplo com SEQUENCE e TRIGGER:</h5>
                    <pre><code class="language-sql">
-- 1. Criar a SEQUENCE (Sequ√™ncia de n√∫meros)
--   - START WITH 1: Come√ßa a sequ√™ncia do n√∫mero 1
--   - INCREMENT BY 1: Incrementa a sequ√™ncia de 1 em 1
--   - NOMAXVALUE: N√£o define um valor m√°ximo para a sequ√™ncia
--   - NOCYCLE: N√£o reinicia a sequ√™ncia ap√≥s atingir o valor m√°ximo (se houver)
--   - CACHE 20: Armazena 20 n√∫meros da sequ√™ncia em mem√≥ria para melhorar a performance
CREATE SEQUENCE SEQ_ALUNO_ID_MANUAL
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
CACHE 20;

-- 2. Criar a tabela com a coluna que receber√° o valor da SEQUENCE (se n√£o for IDENTITY)
-- DROP TABLE ALUNOS; -- Se precisar recriar sem IDENTITY
CREATE TABLE ALUNOS (
    ID NUMBER PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    DATA_MATRIICULA DATE NOT NULL
);

-- 3. Criar uma TRIGGER (Gatilho) para associar a SEQUENCE √† tabela (OPCIONAL, para flexibilidade)
--    Esta trigger √© "flex√≠vel": se voc√™ n√£o fornecer o ID, ela usa a sequence.
--    Se voc√™ fornecer o ID, ela usa o que voc√™ forneceu.
CREATE OR REPLACE TRIGGER TRG_ALUNO_ID
BEFORE INSERT ON ALUNOS
FOR EACH ROW
BEGIN
    IF :NEW.ID IS NULL THEN
        :NEW.ID := SEQ_ALUNO_ID_MANUAL.NEXTVAL;
    END IF;
END;
/

-- Inser√ß√£o usando a TRIGGER (sem informar o ID, a trigger usar√° a SEQUENCE)
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES ('Profa. Ana', TO_DATE('2000-01-01', 'YYYY-MM-DD'), SYSDATE);

-- Inser√ß√£o informando o ID manualmente (a trigger n√£o atuar√°, e o ID fornecido ser√° usado)
INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES (100, 'Prof. Carlos', TO_DATE('2001-02-02', 'YYYY-MM-DD'), SYSDATE);

-- 4. Inser√ß√£o DIRETAMENTE usando a SEQUENCE (Abordagem muito comum e recomendada)
--    Nesta abordagem, voc√™ assume o controle da gera√ß√£o do ID e explicitamente
--    pede o pr√≥ximo valor da sequ√™ncia no INSERT.
INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA)
VALUES (SEQ_ALUNO_ID_MANUAL.NEXTVAL, 'Prof. Jo√£o', TO_DATE('2002-03-03', 'YYYY-MM-DD'), SYSDATE);

INSERT INTO ALUNOS (ID, NOME, DATA_NASCIMENTO, DATA_MATRIICULA)
VALUES (SEQ_ALUNO_ID_MANUAL.NEXTVAL, 'Profa. L√∫cia', TO_DATE('2003-04-04', 'YYYY-MM-DD'), SYSDATE);

SELECT * FROM ALUNOS;
                    </code></pre>
                </div>

                <h3>1.5. ALTER TABLE: Modificando a Estrutura Existente <i class="fas fa-edit"></i></h3>
                <p>O comando `ALTER TABLE` permite modificar a estrutura de uma tabela existente. Voc√™ pode adicionar,
                    modificar ou remover colunas e restri√ß√µes, al√©m de renomear objetos.</p>

                <div class="card">
                    <h4>Cen√°rio: Modificando a Tabela ALUNOS</h4>
                    <pre><code class="language-sql">
-- Adicionar uma nova coluna 'TELEFONE' (j√° definida com DEFAULT na cria√ß√£o original)
ALTER TABLE ALUNOS
ADD (TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado');

-- Modificar o tamanho da coluna 'NOME' para 200 caracteres
ALTER TABLE ALUNOS
MODIFY (NOME VARCHAR2(200));

-- Adicionar uma restri√ß√£o NOT NULL √† coluna 'TELEFONE' (se a coluna n√£o tiver dados nulos existentes e voc√™ removeu o DEFAULT)
-- ALTER TABLE ALUNOS
-- MODIFY (TELEFONE VARCHAR2(20) NOT NULL);

-- Remover a coluna 'SEXO'
ALTER TABLE ALUNOS
DROP COLUMN SEXO;

-- Adicionar uma constraint de CHECK para validar o email (se n√£o existir)
ALTER TABLE ALUNOS
ADD CONSTRAINT chk_aluno_email CHECK (EMAIL LIKE '%@%.%');

-- Renomear uma coluna (do Oracle 10g em diante)
ALTER TABLE ALUNOS
RENAME COLUMN TELEFONE TO CONTATO_TELEFONE;

-- Renomear a tabela inteira
ALTER TABLE ALUNOS
RENAME TO ESTUDANTES;

-- Para renomear de volta se necess√°rio
ALTER TABLE ESTUDANTES
RENAME TO ALUNOS;
                    </code></pre>
                </div>

                <h3>1.6. DROP TABLE: Excluindo uma Tabela <i class="fas fa-trash-alt"></i></h3>
                <p>O comando `DROP TABLE` √© usado para remover completamente uma tabela do banco de dados, incluindo
                    todos os seus dados, √≠ndices e restri√ß√µes. Esta opera√ß√£o √© irrevers√≠vel.</p>
                <div class="card">
                    <h4>Cen√°rio: Excluindo as Tabelas do Sistema Escolar (Ordem Importante!)</h4>
                    <p>Ao excluir tabelas com chaves estrangeiras, √© crucial seguir a ordem inversa da cria√ß√£o para
                        evitar erros de depend√™ncia. Exclua primeiro as tabelas filhas (que referenciam chaves de outras
                        tabelas).</p>
                    <pre><code class="language-sql">
-- Ordem correta para DROP (filhas primeiro, pais depois):
DROP TABLE NOTAS CASCADE CONSTRAINTS; -- Remove NOTAS e suas FKs
DROP TABLE TURMAS CASCADE CONSTRAINTS; -- Remove TURMAS e suas FKs
DROP TABLE ALUNOS CASCADE CONSTRAINTS; -- Remove ALUNOS e suas FKs
DROP TABLE PROFESSORES CASCADE CONSTRAINTS; -- Remove PROFESSORES e suas FKs
                    </code></pre>
                    <p><span class="highlight-warning"><strong>Cuidado:</strong></span> `DROP TABLE` apaga a tabela e
                        todos os seus dados. Se houver chaves estrangeiras referenciando esta tabela, voc√™ precisar√°
                        apagar primeiro as tabelas que referenciam, ou usar `CASCADE CONSTRAINTS` (com muito cuidado).
                    </p>
                    <pre><code class="language-sql">
-- Para remover a tabela permanentemente, sem envi√°-la para a recycle bin (no Oracle 10g+).
-- Geralmente usado em scripts de deploy ou em testes, para garantir limpeza total.
DROP TABLE ALUNOS PURGE;
                    </code></pre>
                    <p><span class="highlight-info"><strong>Recycle Bin:</strong></span> No Oracle, uma tabela "DROPADA"
                        vai para a "Recycle Bin" (lixeira) e pode ser recuperada com `FLASHBACK TABLE` ou `RECYCLEBIN`
                        at√© que seja purgada. `PURGE` remove permanentemente.</p>
                </div>
            </div>

            <div class="sub-section">
                <h2>2Ô∏è‚É£ Linguagem de Manipula√ß√£o de Dados (DML) <i class="fas fa-database"></i></h2>
                <p>DML (Data Manipulation Language) √© usada para manipular os dados dentro dos objetos do banco de dados
                    (tabelas). As opera√ß√µes DML s√£o transacionais, o que significa que voc√™ pode confirmar (`COMMIT`) ou
                    reverter (`ROLLBACK`) as altera√ß√µes.</p>

                <h3>2.1. INSERT INTO: Inserindo Dados <i class="fas fa-plus-circle"></i></h3>
                <p>O comando `INSERT INTO` √© usado para adicionar novas linhas (registros) a uma tabela.</p>

                <div class="card">
                    <h4>Cen√°rio: Inserindo Dados nas Tabelas</h4>
                    <p>Vamos adicionar alguns dados √†s nossas tabelas.</p>
                    <pre><code class="language-sql">
-- Inserindo em ALUNOS (ID √© GENERATED ALWAYS, ent√£o n√£o inclua na lista de colunas)
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Jo√£o Silva', TO_DATE('2005/05/15', 'YYYY/MM/DD'), 'M', 'joao.silva@email.com', TO_DATE('2020-02-10', 'YYYY-MM-DD'), 'Ativo');

INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Maria Oliveira', TO_DATE('2004-07-21', 'YYYY-MM-DD'), 'F', 'maria.oliveira@email.com', TO_DATE('01/03/2019', 'DD/MM/YYYY'), 'Transferido');

INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Pedro Santos', TO_DATE('2006-03-20', 'YYYY-MM-DD'), 'M', 'pedro.santos@email.com', TO_DATE('2021-02-15', 'YYYY-MM-DD'), 'Ativo');

-- Inserindo em PROFESSORES (ID √© GENERATED ALWAYS)
INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, TELEFONE, EMAIL, SALARIO)
VALUES ('Carlos Souza', 'Matem√°tica', TO_DATE('2015-02-25', 'YYYY-MM-DD'), '99999-1234', 'carlos.souza@email.com', 3500.00);

INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, TELEFONE, EMAIL, SALARIO)
VALUES ('Ana Costa', 'Portugu√™s', TO_DATE('2017-06-10', 'YYYY-MM-DD'), '99999-5678', 'ana.costa@email.com', 3000.00);

-- Inserindo em TURMAS (assumindo IDs 1 e 2 para professores j√° inseridos)
INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, PROFESSOR_ID, NUMERO_ALUNOS)
VALUES (2025, '8¬∫ Ano', 'M', 1, 28);

INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, PROFESSOR_ID, NUMERO_ALUNOS)
VALUES (2025, '9¬∫ Ano', 'T', 2, 22);

-- Inserindo em NOTAS (assumindo IDs 1 e 2 para alunos, e 1 e 2 para turmas)
INSERT INTO NOTAS (ALUNO_ID, TURMA_ID, MATERIA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, MEDIA_FINAL)
VALUES (1, 1, 'Matem√°tica', 8.5, 7.0, 9.0, 8.0, 8.13);

INSERT INTO NOTAS (ALUNO_ID, TURMA_ID, MATERIA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, MEDIA_FINAL)
VALUES (2, 2, 'Portugu√™s', 9.0, 8.5, 7.5, 9.5, 8.63);

COMMIT; -- Salvar as altera√ß√µes
                    </code></pre>
                    <h4>Notas de Inser√ß√£o:</h4>
                    <ul>
                        <li>√â boa pr√°tica listar as colunas nas quais voc√™ est√° inserindo dados, mesmo que seja em
                            todas.</li>
                        <li>Se uma coluna tem um valor `DEFAULT` e voc√™ n√£o a inclui na lista de colunas, o valor padr√£o
                            ser√° usado.</li>
                        <li>Para colunas `IDENTITY GENERATED ALWAYS`, voc√™ **n√£o** pode especificar o `ID`.</li>
                        <li>Para colunas `IDENTITY GENERATED BY DEFAULT ON NULL`, voc√™ pode omitir o `ID`, passar `NULL`
                            explicitamente, ou passar um valor manual.</li>
                        <li>Quando usar uma `SEQUENCE` e o `ID` for apenas `NUMBER PRIMARY KEY` (sem ser `IDENTITY`),
                            voc√™ deve explicitamente usar `NOME_DA_SEQUENCE.NEXTVAL` para gerar o ID na inser√ß√£o.</li>
                        <li>`TO_DATE('YYYY-MM-DD', 'YYYY-MM-DD')` √© uma fun√ß√£o Oracle para converter uma string em um
                            tipo de dado `DATE`.</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>2.1.1. Inserindo Dados a Partir de Outra Tabela (`INSERT INTO ... SELECT`) <i
                            class="fas fa-arrow-alt-circle-down"></i></h4>
                    <p>Permite inserir dados em uma tabela a partir do resultado de uma consulta `SELECT` em outra
                        tabela (ou na mesma tabela).</p>
                    <pre><code class="language-sql">
-- Inserir alunos com status 'Transferido' em uma nova tabela de backup, por exemplo
CREATE TABLE ALUNOS_TRANSFERIDOS_BACKUP (
    ID NUMBER PRIMARY KEY,
    NOME VARCHAR2(255),
    EMAIL VARCHAR2(255)
);

INSERT INTO ALUNOS_TRANSFERIDOS_BACKUP (ID, NOME, EMAIL)
SELECT ID, NOME, EMAIL
FROM ALUNOS
WHERE STATUS_MATRICULA = 'Transferido';

COMMIT;
                    </code></pre>
                </div>

                <h3>2.2. UPDATE: Atualizando Dados <i class="fas fa-redo-alt"></i></h3>
                <p>O comando `UPDATE` √© usado para modificar dados existentes em uma ou mais linhas de uma tabela.</p>

                <div class="card">
                    <h4>Cen√°rio: Atualizando Dados nas Tabelas</h4>
                    <pre><code class="language-sql">
UPDATE ALUNOS
SET TELEFONE = '81 99999-9999'
WHERE Upper(NOME) = 'JO√ÉO SILVA';

UPDATE ALUNOS
SET STATUS_MATRICULA = 'Ativo'
WHERE EMAIL = 'maria.oliveira@email.com';

UPDATE PROFESSORES
SET SALARIO = SALARIO * 1.10 -- Aumento de 10%
WHERE ESPECIALIDADE = 'Matem√°tica';

UPDATE TURMAS
SET NUMERO_ALUNOS = NUMERO_ALUNOS + 2
WHERE SERIE = '8¬∫ Ano' AND TURNO = 'M';

UPDATE NOTAS
SET NOTA_4 = 10.0, MEDIA_FINAL = (NOTA_1 + NOTA_2 + NOTA_3 + 10.0) / 4
WHERE ALUNO_ID = 1 AND MATERIA = 'Matem√°tica';

COMMIT;
                    </code></pre>
                    <p><span class="highlight-warning"><strong>Cuidado:</strong></span> Sempre use a cl√°usula `WHERE` em
                        um `UPDATE` para evitar atualizar todas as linhas da tabela por engano.</p>
                </div>

                <h3>2.3. DELETE FROM: Excluindo Dados <i class="fas fa-minus-circle"></i></h3>
                <p>O comando `DELETE FROM` √© usado para remover uma ou mais linhas de uma tabela.</p>

                <div class="card">
                    <h4>Cen√°rio: Excluindo Dados das Tabelas</h4>
                    <pre><code class="language-sql">
DELETE FROM NOTAS
WHERE ALUNO_ID = 2; -- Excluir notas do aluno com ID 2

DELETE FROM ALUNOS
WHERE NOME = 'Maria Oliveira'; -- Excluir aluno 'Maria Oliveira'

DELETE FROM TURMAS
WHERE ANO_LETIVO = 2025 AND SERIE = '9¬∫ Ano';

-- Excluir todos os registros da tabela (CUIDADO!)
-- DELETE FROM ALUNOS;

COMMIT;
                    </code></pre>
                    <p><span class="highlight-warning"><strong>Cuidado:</strong></span> Similar ao `UPDATE`, sempre use
                        a cl√°usula `WHERE` em um `DELETE` para evitar apagar todas as linhas da tabela por engano.
                        Lembre-se que `DELETE` pode ser revertido com `ROLLBACK` (se n√£o houver um `COMMIT` posterior).
                    </p>
                </div>
            </div>

            <div class="sub-section">
                <h2>3Ô∏è‚É£ Linguagem de Consulta de Dados (DQL) <i class="fas fa-search"></i></h2>
                <p>DQL (Data Query Language) √© usada para recuperar dados de um banco de dados. O comando `SELECT` √© o
                    comando mais utilizado em DQL.</p>

                <div class="card">
                    <h3>3.1. SELECT: Consultando Dados <i class="fas fa-eye"></i></h3>
                    <h4>Sintaxe B√°sica e Cl√°usulas Comuns:</h4>
                    <p>A sintaxe b√°sica de um `SELECT` √©:</p>
                    <pre><code class="language-sql">
SELECT [DISTINCT] column1, column2, ... | *
FROM table_name
[WHERE condition]
[GROUP BY column(s)]
[HAVING condition]
[ORDER BY column(s) [ASC|DESC]]
[FETCH FIRST N ROWS ONLY | OFFSET M ROWS FETCH NEXT N ROWS ONLY]; -- Para limitar resultados (Oracle 12c+)
                    </code></pre>
                    <ul>
                        <li>`SELECT`: Especifica as colunas que voc√™ deseja ver ou uma express√£o. `*` seleciona todas as
                            colunas.</li>
                        <li>`FROM`: Indica de qual tabela os dados ser√£o recuperados.</li>
                        <li>`WHERE`: Filtra as linhas com base em uma condi√ß√£o.</li>
                        <li>`GROUP BY`: Agrupa linhas que t√™m os mesmos valores em colunas especificadas em um conjunto
                            de resumo.</li>
                        <li>`HAVING`: Filtra grupos com base em uma condi√ß√£o (usado ap√≥s `GROUP BY`).</li>
                        <li>`ORDER BY`: Classifica o conjunto de resultados em ordem crescente (`ASC`) ou decrescente
                            (`DESC`).</li>
                        <li>`FETCH FIRST N ROWS ONLY` / `OFFSET M ROWS FETCH NEXT N ROWS ONLY`: Limita o n√∫mero de
                            linhas retornadas (pagina√ß√£o).</li>
                    </ul>

                    <h4>Cen√°rio: Consultando Dados das Tabelas</h4>
                    <pre><code class="language-sql">
-- Selecionar todas as colunas de todos os alunos
SELECT *
FROM ALUNOS;

-- Selecionar apenas NOME, EMAIL e TELEFONE dos alunos
SELECT NOME, EMAIL, TELEFONE
FROM ALUNOS;

-- Selecionar especialidades √∫nicas de professores
SELECT DISTINCT ESPECIALIDADE
FROM PROFESSORES;

-- Selecionar alunos com STATUS_MATRICULA 'Ativo'
SELECT NOME, DATA_MATRIICULA, STATUS_MATRICULA
FROM ALUNOS
WHERE STATUS_MATRICULA = 'Ativo';

-- Selecionar professores cujo nome come√ßa com 'A'
SELECT NOME, ESPECIALIDADE
FROM PROFESSORES
WHERE NOME LIKE 'A%';

-- Selecionar turmas do turno 'M' ou 'T'
SELECT ANO_LETIVO, SERIE, TURNO
FROM TURMAS
WHERE TURNO IN ('M', 'T');

-- Selecionar alunos nascidos entre 2004 e 2006 (inclusive)
SELECT NOME, DATA_NASCIMENTO
FROM ALUNOS
WHERE EXTRACT(YEAR FROM DATA_NASCIMENTO) BETWEEN 2004 AND 2006;

-- Selecionar alunos que n√£o t√™m EMAIL cadastrado (NULL)
SELECT NOME, EMAIL
FROM ALUNOS
WHERE EMAIL IS NULL;

-- Selecionar alunos e ordenar por NOME em ordem alfab√©tica (ASC √© padr√£o)
SELECT ID, NOME, DATA_MATRIICULA
FROM ALUNOS
ORDER BY NOME ASC;

-- Selecionar notas e ordenar por MEDIA_FINAL de forma decrescente
SELECT ALUNO_ID, MATERIA, MEDIA_FINAL
FROM NOTAS
ORDER BY MEDIA_FINAL DESC;

-- Limitar o resultado aos 2 primeiros professores (Oracle 12c+)
SELECT ID, NOME, ESPECIALIDADE
FROM PROFESSORES
ORDER BY ID
FETCH FIRST 2 ROWS ONLY;

-- Contar o total de alunos
SELECT COUNT(*)
FROM ALUNOS;

-- Contar quantos alunos existem por STATUS_MATRICULA
SELECT STATUS_MATRICULA, COUNT(*) AS TOTAL_ALUNOS
FROM ALUNOS
GROUP BY STATUS_MATRICULA;

-- Contar quantos professores existem por ESPECIALIDADE, mas apenas especialidades com mais de 1 professor
SELECT ESPECIALIDADE, COUNT(*) AS TOTAL_PROFESSORES
FROM PROFESSORES
GROUP BY ESPECIALIDADE
HAVING COUNT(*) > 1;
                    </code></pre>
                </div>

                <div class="card">
                    <h3>3.2. Fun√ß√µes Essenciais em SELECT <i class="fas fa-cogs"></i></h3>
                    <p>O Oracle SQL oferece muitas fun√ß√µes embutidas que podem ser usadas para manipular dados em suas
                        consultas.</p>
                    <pre><code class="language-sql">
-- Fun√ß√µes de String
SELECT UPPER('oracle sql') AS upper_case,
       LOWER('ORACLE SQL') AS lower_case,
       LENGTH('Oracle') AS text_length
FROM DUAL; -- DUAL √© uma tabela especial no Oracle para testar fun√ß√µes

-- Fun√ß√µes Num√©ricas
SELECT ROUND(123.456, 2) AS rounded_number, -- Arredonda para 2 casas decimais
       TRUNC(123.456, 1) AS truncated_number, -- Trunca para 1 casa decimal
       ABS(-100) AS absolute_value
FROM DUAL;

-- Fun√ß√µes de Data e Hora
SELECT SYSDATE AS current_date_time, -- Data e hora atuais do sistema
       TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') AS formatted_date, -- Formata data para string
       TO_DATE('2025-12-25', 'YYYY-MM-DD') AS string_to_date -- Converte string para data
FROM DUAL;

-- Fun√ß√£o NVL: substitui NULL por um valor especificado
SELECT NOME, NVL(EMAIL, 'Email n√£o cadastrado') AS EMAIL_OU_PADRAO
FROM ALUNOS;
                    </code></pre>
                    <p><span class="highlight-info"><strong>Tabela DUAL:</strong></span> A tabela `DUAL` √© uma tabela de
                        sistema no Oracle com uma √∫nica coluna (`DUMMY`) e uma √∫nica linha (`X`). Ela √© usada para
                        executar fun√ß√µes que n√£o precisam de uma tabela espec√≠fica, como obter a data atual ou testar
                        express√µes.</p>
                </div>
            </div>

            <div class="sub-section">
                <h2>4Ô∏è‚É£ Linguagem de Controle de Transa√ß√£o (TCL) <i class="fas fa-exchange-alt"></i></h2>
                <p>TCL (Transaction Control Language) √© usada para gerenciar transa√ß√µes no banco de dados. Uma transa√ß√£o
                    √© uma sequ√™ncia de uma ou mais opera√ß√µes DML (INSERT, UPDATE, DELETE) que s√£o tratadas como uma
                    √∫nica unidade de trabalho. Ou seja, todas as opera√ß√µes dentro da transa√ß√£o devem ser conclu√≠das com
                    sucesso, ou nenhuma delas ser√°.</p>

                <h3>4.1. COMMIT: Confirmando Altera√ß√µes <i class="fas fa-check-circle"></i></h3>
                <p>O comando `COMMIT` salva permanentemente as altera√ß√µes feitas em uma transa√ß√£o no banco de dados. Uma
                    vez que um `COMMIT` √© executado, as altera√ß√µes se tornam vis√≠veis para outros usu√°rios e n√£o podem
                    ser desfeitas com `ROLLBACK`.</p>
                <div class="card">
                    <pre><code class="language-sql">
-- Inserir um novo aluno
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Jo√£o da Silva', TO_DATE('2007-08-01', 'YYYY-MM-DD'), SYSDATE, 'Ativo');

-- Atualizar o nome de um aluno existente
UPDATE ALUNOS
SET NOME = 'Jo√£o Silva J√∫nior'
WHERE NOME = 'Jo√£o da Silva';

-- Confirmar todas as altera√ß√µes realizadas desde o √∫ltimo COMMIT
COMMIT;
                    </code></pre>
                    <p><span class="highlight-info"><strong>Auto-Commit:</strong></span> Em algumas ferramentas (como
                        SQL Developer), o auto-commit pode estar ativado por padr√£o. Em ambientes de desenvolvimento, √©
                        comum desativar o auto-commit para praticar o controle manual das transa√ß√µes.</p>
                </div>

                <h3>4.2. ROLLBACK: Desfazendo Altera√ß√µes <i class="fas fa-undo"></i></h3>
                <p>O comando `ROLLBACK` desfaz todas as altera√ß√µes feitas na transa√ß√£o atual desde o √∫ltimo `COMMIT` ou
                    `ROLLBACK`. Ele reverte o banco de dados para o estado em que estava antes do in√≠cio da transa√ß√£o.
                </p>
                <div class="card">
                    <pre><code class="language-sql">
-- Inserir um aluno que pode estar errado
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Aluno Errado', TO_DATE('2008-09-09', 'YYYY-MM-DD'), SYSDATE, 'Ativo');

-- Tentar atualizar algo que n√£o deveria
UPDATE ALUNOS
SET STATUS_MATRICULA = 'Trancado'
WHERE NOME = 'Jo√£o Silva';

-- Verificar as altera√ß√µes (elas s√£o vis√≠veis para a sess√£o atual)
SELECT NOME, STATUS_MATRICULA FROM ALUNOS WHERE NOME IN ('Aluno Errado', 'Jo√£o Silva');

-- Desfazer todas as altera√ß√µes desde o √∫ltimo COMMIT
ROLLBACK;

-- Verificar novamente (as altera√ß√µes foram desfeitas)
SELECT NOME, STATUS_MATRICULA FROM ALUNOS WHERE NOME IN ('Aluno Errado', 'Jo√£o Silva');
                    </code></pre>
                </div>

                <h3>4.3. SAVEPOINT: Pontos de Salvamento na Transa√ß√£o <i class="fas fa-bookmark"></i></h3>
                <p>Um `SAVEPOINT` (ponto de salvamento) permite que voc√™ defina um ponto dentro de uma transa√ß√£o ao qual
                    voc√™ pode reverter, sem desfazer toda a transa√ß√£o. √â √∫til para desfazer apenas parte de um conjunto
                    de opera√ß√µes DML.</p>
                <div class="card">
                    <pre><code class="language-sql">
-- In√≠cio da transa√ß√£o
INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO) VALUES ('Professor Um', 'Hist√≥ria', SYSDATE, 2800.00);

-- Define um ponto de salvamento
SAVEPOINT primeiro_ponto;

INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, SALARIO) VALUES ('Professor Dois', 'Geografia', SYSDATE, 2900.00);

-- Desfazer apenas at√© 'primeiro_ponto'
ROLLBACK TO primeiro_ponto;

-- 'Professor Dois' foi desfeito, mas 'Professor Um' ainda existe (na transa√ß√£o atual)
SELECT NOME FROM PROFESSORES WHERE NOME IN ('Professor Um', 'Professor Dois');

-- Confirmar 'Professor Um'
COMMIT;
                    </code></pre>
                </div>
            </div>

            <div class="sub-section">
                <h2>5Ô∏è‚É£ Excluindo Objetos do Banco de Dados <i class="fas fa-eraser"></i></h2>
                <p>√â importante saber como remover os objetos que voc√™ criou, seja para limpeza, recria√ß√£o ou
                    organiza√ß√£o. Al√©m de `DROP TABLE`, existem outros comandos de exclus√£o importantes.</p>

                <h3>5.1. DROP SEQUENCE: Removendo Sequ√™ncias <i class="fas fa-list-ol"></i></h3>
                <p>Se voc√™ criou uma `SEQUENCE` para auto-incremento, pode remov√™-la com `DROP SEQUENCE`.</p>
                <div class="card">
                    <pre><code class="language-sql">
DROP SEQUENCE SEQ_ALUNO_ID_MANUAL;
                    </code></pre>
                </div>

                <h3>5.2. DROP TRIGGER: Removendo Gatilhos <i class="fas fa-bolt"></i></h3>
                <p>Se voc√™ criou uma `TRIGGER` para associar uma sequ√™ncia a uma tabela, pode remov√™-la com `DROP
                    TRIGGER`.</p>
                <div class="card">
                    <pre><code class="language-sql">
DROP TRIGGER TRG_ALUNO_ID;
                    </code></pre>
                </div>

                <h3>5.3. TRUNCATE TABLE: Limpando a Tabela Rapidamente <i class="fas fa-broom"></i></h3>
                <p>O comando `TRUNCATE TABLE` √© uma opera√ß√£o DDL que remove **todas** as linhas de uma tabela de forma
                    muito r√°pida e eficiente. Diferente do `DELETE`, ele n√£o gera logs de transa√ß√£o para cada linha e
                    **n√£o pode ser revertido com `ROLLBACK`**. Ele tamb√©m reinicia qualquer contador de `IDENTITY` para
                    o valor inicial, e libera o espa√ßo de armazenamento da tabela.</p>
                <div class="card">
                    <pre><code class="language-sql">
TRUNCATE TABLE ALUNOS;
                    </code></pre>
                    <p><span class="highlight-warning"><strong>Cuidado Extremo:</strong></span> Use `TRUNCATE` apenas
                        quando tiver certeza de que deseja apagar todos os dados e n√£o precisar recuper√°-los. √â muito
                        r√°pido, mas irrevers√≠vel. √â mais perform√°tico para limpar tabelas grandes do que `DELETE` sem
                        `WHERE`.</p>
                </div>
            </div>

            <div class="exercise">
                <h2>Exerc√≠cios Pr√°ticos <i class="fas fa-question-circle"></i></h2>
                <p>Pratique os comandos aprendidos criando e manipulando as tabelas do sistema escolar.</p>
                <div class="card">
                    <ol class="padding-r-10">
                        <li>
                            <p><strong>Crie as Tabelas <code>ALUNOS</code>, <code>PROFESSORES</code>,
                                    <code>TURMAS</code> e <code>NOTAS</code>:</strong></p>
                            <ul>
                                <li>Utilize as defini√ß√µes de tabela fornecidas no in√≠cio do documento.</li>
                                <li>Certifique-se de que todas as chaves prim√°rias s√£o `GENERATED ALWAYS AS IDENTITY`.
                                </li>
                                <li>Configure as chaves estrangeiras corretamente.</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL1')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL1">
                                <pre><code class="language-sql">
-- Certifique-se de dropar as tabelas na ordem correta antes de recri√°-las
-- DROP TABLE NOTAS CASCADE CONSTRAINTS;
-- DROP TABLE TURMAS CASCADE CONSTRAINTS;
-- DROP TABLE ALUNOS CASCADE CONSTRAINTS;
-- DROP TABLE PROFESSORES CASCADE CONSTRAINTS;

CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    TELEFONE VARCHAR2(20) DEFAULT 'N√£o informado',
    SEXO VARCHAR2(1),
    EMAIL VARCHAR2(255) UNIQUE,
    DATA_MATRIICULA DATE NOT NULL,
    STATUS_MATRICULA VARCHAR2(20) CHECK (STATUS_MATRICULA IN ('Ativo', 'Transferido', 'Trancado'))
);

CREATE TABLE PROFESSORES (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(150) NOT NULL,
    ESPECIALIDADE VARCHAR2(100) NOT NULL,
    DT_ADIMISSAO DATE NOT NULL,
    TELEFONE VARCHAR2(20),
    EMAIL VARCHAR2(150),
    SALARIO NUMBER(10,2) NOT NULL
);

CREATE TABLE TURMAS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    ANO_LETIVO NUMBER(4) NOT NULL,
    SERIE VARCHAR2(20) NOT NULL,
    TURNO VARCHAR2(1) CHECK (TURNO IN('M','T','N')),
    PROFESSOR_ID NUMBER,
    NUMERO_ALUNOS NUMBER(3) CHECK (NUMERO_ALUNOS >= 2),
    CONSTRAINT FK_PROFESSOR FOREIGN KEY (PROFESSOR_ID) REFERENCES PROFESSORES (ID) ON DELETE SET NULL
);

CREATE TABLE NOTAS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    ALUNO_ID NUMBER,
    TURMA_ID NUMBER,
    MATERIA VARCHAR2(100) NOT NULL,
    NOTA_1 NUMBER(5,2),
    NOTA_2 NUMBER(5,2),
    NOTA_3 NUMBER(5,2),
    NOTA_4 NUMBER(5,2),
    MEDIA_FINAL NUMBER(5,2),
    CONSTRAINT fk_aluno FOREIGN KEY (aluno_id) REFERENCES Alunos(id),
    CONSTRAINT fk_turma FOREIGN KEY (turma_id) REFERENCES Turmas(id)
);
                                </code></pre>
                            </div>
                        </li>
                        <li>
                            <p><strong>Insira dados nas tabelas:</strong></p>
                            <ul>
                                <li>Insira pelo menos 3 alunos na tabela `ALUNOS`.</li>
                                <li>Insira pelo menos 2 professores na tabela `PROFESSORES`.</li>
                                <li>Insira pelo menos 2 turmas na tabela `TURMAS`, associando-as aos professores
                                    criados.</li>
                                <li>Insira pelo menos 3 registros de notas na tabela `NOTAS`, associando-os a alunos e
                                    turmas.</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL2')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL2">
                                <pre><code class="language-sql">
-- Inserir alunos
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Jo√£o Silva', TO_DATE('2005/05/15', 'YYYY/MM/DD'), 'M', 'joao.silva@email.com', TO_DATE('2020-02-10', 'YYYY-MM-DD'), 'Ativo');

INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Maria Oliveira', TO_DATE('2004-07-21', 'YYYY-MM/DD'), 'F', 'maria.oliveira@email.com', TO_DATE('2019-03-01', 'YYYY-MM-DD'), 'Ativo');

INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, TELEFONE, SEXO, EMAIL, DATA_MATRIICULA, STATUS_MATRICULA)
VALUES ('Pedro Santos', TO_DATE('2006-03-20', 'YYYY-MM-DD'), '81 9876-1234', 'M', 'pedro.santos@email.com', TO_DATE('2021-02-15', 'YYYY-MM-DD'), 'Transferido');

-- Inserir professores
INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, TELEFONE, EMAIL, SALARIO)
VALUES ('Carlos Souza', 'Matem√°tica', TO_DATE('2015-02-25', 'YYYY-MM-DD'), '99999-1234', 'carlos.souza@email.com', 3500.00);

INSERT INTO PROFESSORES (NOME, ESPECIALIDADE, DT_ADIMISSAO, TELEFONE, EMAIL, SALARIO)
VALUES ('Ana Costa', 'Portugu√™s', TO_DATE('2017-06-10', 'YYYY-MM-DD'), '99999-5678', 'ana.costa@email.com', 3000.00);

-- Inserir turmas (assumindo que Carlos Souza tem ID 1 e Ana Costa tem ID 2)
INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, PROFESSOR_ID, NUMERO_ALUNOS)
VALUES (2025, '8¬∫ Ano', 'M', 1, 28);

INSERT INTO TURMAS (ANO_LETIVO, SERIE, TURNO, PROFESSOR_ID, NUMERO_ALUNOS)
VALUES (2025, '9¬∫ Ano', 'T', 2, 22);

-- Inserir notas (assumindo que Jo√£o Silva tem ID 1, Maria Oliveira tem ID 2, Turma 8¬∫ Ano tem ID 1, Turma 9¬∫ Ano tem ID 2)
INSERT INTO NOTAS (ALUNO_ID, TURMA_ID, MATERIA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, MEDIA_FINAL)
VALUES (1, 1, 'Matem√°tica', 8.5, 7.0, 9.0, 8.0, 8.13);

INSERT INTO NOTAS (ALUNO_ID, TURMA_ID, MATERIA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, MEDIA_FINAL)
VALUES (2, 2, 'Portugu√™s', 9.0, 8.5, 7.5, 9.5, 8.63);

INSERT INTO NOTAS (ALUNO_ID, TURMA_ID, MATERIA, NOTA_1, NOTA_2, NOTA_3, NOTA_4, MEDIA_FINAL)
VALUES (1, 1, 'Hist√≥ria', 7.0, 6.5, 8.0, 7.5, 7.25);

COMMIT;
                                </code></pre>
                            </div>
                        </li>
                        <li>
                            <p><strong>Atualize dados:</strong></p>
                            <ul>
                                <li>Mude o `TELEFONE` do aluno 'Jo√£o Silva'.</li>
                                <li>Aumente o `SALARIO` de todos os professores de 'Portugu√™s' em 15%.</li>
                                <li>Atualize o `NUMERO_ALUNOS` de uma turma espec√≠fica.</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL3')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL3">
                                <pre><code class="language-sql">
UPDATE ALUNOS
SET TELEFONE = '81 99999-9999'
WHERE Upper(NOME) = 'JO√ÉO SILVA';

UPDATE PROFESSORES
SET SALARIO = SALARIO * 1.15
WHERE ESPECIALIDADE = 'Portugu√™s';

UPDATE TURMAS
SET NUMERO_ALUNOS = 30
WHERE SERIE = '8¬∫ Ano' AND TURNO = 'M';

COMMIT;
                                </code></pre>
                            </div>
                        </li>
                        <li>
                            <p><strong>Consulte os dados:</strong></p>
                            <ul>
                                <li>Selecione todas as colunas de todos os alunos.</li>
                                <li>Selecione `NOME`, `ESPECIALIDADE` e `SALARIO` dos professores que ganham mais de
                                    R$3200.</li>
                                <li>Conte quantos alunos existem com `STATUS_MATRICULA` 'Ativo'.</li>
                                <li>Selecione o `NOME` do aluno e a `MEDIA_FINAL` de suas notas, ordenando pela m√©dia
                                    final em ordem decrescente.</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL4')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL4">
                                <pre><code class="language-sql">
SELECT * FROM ALUNOS;

SELECT NOME, ESPECIALIDADE, SALARIO
FROM PROFESSORES
WHERE SALARIO > 3200;

SELECT COUNT(*) AS ALUNOS_ATIVOS
FROM ALUNOS
WHERE STATUS_MATRICULA = 'Ativo';

SELECT A.NOME, N.MATERIA, N.MEDIA_FINAL
FROM ALUNOS A
JOIN NOTAS N ON A.ID = N.ALUNO_ID
ORDER BY N.MEDIA_FINAL DESC;
                                </code></pre>
                            </div>
                        </li>
                        <li>
                            <p><strong>Exclua um registro e teste o `ROLLBACK`:</strong></p>
                            <ul>
                                <li>Exclua um registro de `NOTAS` espec√≠fico.</li>
                                <li>Fa√ßa um `SELECT` para verificar se ele foi exclu√≠do.</li>
                                <li>Execute um `ROLLBACK`.</li>
                                <li>Fa√ßa outro `SELECT` para verificar se o registro voltou (ap√≥s o rollback).</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL5')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL5">
                                <pre><code class="language-sql">
DELETE FROM NOTAS
WHERE ALUNO_ID = 1 AND MATERIA = 'Hist√≥ria'; -- Exclui a nota de Hist√≥ria do Jo√£o Silva

SELECT * FROM NOTAS WHERE ALUNO_ID = 1; -- Observe que a nota de Hist√≥ria n√£o aparece

ROLLBACK; -- Desfaz a exclus√£o

SELECT * FROM NOTAS WHERE ALUNO_ID = 1; -- A nota de Hist√≥ria deve aparecer novamente
                                </code></pre>
                            </div>
                        </li>
                        <li>
                            <p><strong>Remova as tabelas:</strong></p>
                            <ul>
                                <li>Remova completamente todas as tabelas criadas, na ordem correta, usando `DROP TABLE
                                    CASCADE CONSTRAINTS`.</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL6')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL6">
                                <pre><code class="language-sql">
DROP TABLE NOTAS CASCADE CONSTRAINTS;
DROP TABLE TURMAS CASCADE CONSTRAINTS;
DROP TABLE ALUNOS CASCADE CONSTRAINTS;
DROP TABLE PROFESSORES CASCADE CONSTRAINTS;
                                </code></pre>
                            </div>
                        </li>
                        <li>
                            <p><strong>(Desafio) Limpe os dados da tabela <code>ALUNOS</code> usando `TRUNCATE` e
                                    verifique o auto-incremento:</strong></p>
                            <ul>
                                <li>Recrie apenas a tabela `ALUNOS`.</li>
                                <li>Insira alguns dados.</li>
                                <li>Execute o `TRUNCATE TABLE` na `ALUNOS`.</li>
                                <li>Insira um novo dado e observe qual ID √© gerado. Ele deve ter reiniciado para 1.</li>
                            </ul>
                            <button onclick="toggleAnswer('ansExL7')">Mostrar Gabarito</button>
                            <div class="answer" id="ansExL7">
                                <pre><code class="language-sql">
-- Recriar apenas a tabela ALUNOS (necess√°rio se voc√™ j√° a dropou)
CREATE TABLE ALUNOS (
    ID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    NOME VARCHAR2(255) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    DATA_MATRIICULA DATE NOT NULL
);

INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES ('Aluno Teste 1', SYSDATE, SYSDATE);
INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES ('Aluno Teste 2', SYSDATE, SYSDATE);
COMMIT; -- Salva as inser√ß√µes

SELECT * FROM ALUNOS; -- Veja os IDs gerados (e.g., 1, 2)

TRUNCATE TABLE ALUNOS; -- Limpa a tabela e reinicia o contador
-- COMMIT impl√≠cito ap√≥s TRUNCATE

SELECT * FROM ALUNOS; -- Deve estar vazia

INSERT INTO ALUNOS (NOME, DATA_NASCIMENTO, DATA_MATRIICULA) VALUES ('Primeiro Aluno Ap√≥s Truncate', SYSDATE, SYSDATE);
SELECT * FROM ALUNOS; -- O ID gerado deve ser 1 novamente
                                </code></pre>
                            </div>
                        </li>
                    </ol>
                </div>
            </div>

        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {

                const hamburgerMenu = document.getElementById('hamburger-menu');
                const sidebar = document.getElementById('sidebar');
                const content = document.getElementById('content');
                const overlay = document.getElementById('overlay');
                const sidebarLinks = sidebar.querySelectorAll('a');

                function toggleSidebar() {
                    sidebar.classList.toggle('active');
                    content.classList.toggle('sidebar-active');
                    overlay.classList.toggle('active');
                }

                // Adiciona event listeners AP√ìS os elementos serem garantidamente carregados no DOM
                if (hamburgerMenu) {
                    hamburgerMenu.addEventListener('click', toggleSidebar);
                } else {
                    console.warn('Elemento #hamburger-menu n√£o encontrado. Verifique o HTML.');
                }

                if (overlay) {
                    overlay.addEventListener('click', toggleSidebar);
                } else {
                    console.warn('Elemento #overlay n√£o encontrado. Verifique o HTML.');
                }


                sidebarLinks.forEach(link => {
                    link.addEventListener('click', function () {
                        if (sidebar.classList.contains('active')) {
                            toggleSidebar();
                        }
                    });
                });

                function highlightActiveLink() {
                    const currentPathname = window.location.pathname;
                    let currentFileName = currentPathname.split('/').pop();

                    // Se a URL termina em '/', o arquivo atual √© 'index.html'
                    if (currentFileName === '' || currentFileName === 'aulas_sql') { // Adicionado 'aulas_sql' caso a URL base seja s√≥ o nome do repo
                        currentFileName = 'index.html';
                    }

                    sidebarLinks.forEach(link => {
                        const linkHref = link.getAttribute('href');

                        link.classList.remove('active'); // Remove de todos primeiro

                        // L√≥gica para marcar o link ativo
                        if (linkHref === currentFileName || (currentFileName === 'index.html' && linkHref === 'index.html')) {
                            link.classList.add('active');
                        }
                    });
                }

                highlightActiveLink(); // Chama a fun√ß√£o ao inicializar a sidebar

                // Fun√ß√£o para mostrar/esconder o gabarito
                window.toggleAnswer = function (id) {
                    var x = document.getElementById(id);
                    if (x.style.display === "none" || x.style.display === "") {
                        x.style.display = "block";
                    } else {
                        x.style.display = "none";
                    }
                };
            });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    </div>
</body>

</html>